[globals]
; extends = user_config
platform = espressif32
; framework = espidf
framework = arduino ;I would like to change this to espidf in the future as I believe it is slightly lighter on the system for battery and cpu load.
build_type = release
build_flags =
	; ${user_config.build_flags}
	-Wno-unknown-pragmas ;https://stackoverflow.com/questions/12894454/how-to-remove-gcc-warning-on-pragma-region
	-DCORE_DEBUG_LEVEL=5 ;https://community.platformio.org/t/how-to-set-up-log-level-to-be-able-to-debug-the-esp32/8278
	-Wno-format ;Caused by a format error within esp_log.h
	-Wno-missing-field-initializers
	-Wno-unused-variable
	-Wno-comment
	-fno-exceptions
build_unflags =
	-fexceptions
monitor_raw = yes
monitor_speed = 115200
;https://community.platformio.org/t/color-messages-to-terminal-via-serial-monitor/15041/4
; monitor_filters = 
; 	colorize
; 	debug
; 	esp32_exception_decoder
; 	time
lib_deps =
	vshymanskyy/TinyGSM@^0.12.0
	plerup/EspSoftwareSerial@^8.2.0
	mikalhart/TinyGPSPlus@^1.1.0
	arduino-libraries/ArduinoHttpClient@^0.6.1

[debug]
; framework = arduino ;I don't want to use the arduino framework at all, however, unfortunately I need it for some of the debugging libraries that I am using.
build_type = debug
lib_extra_dirs = components
test_framework = unity
test_speed = 115200
;TODO: Figure out how to use the remote upload feature within this config file (I work on my desktop machine but upload to my laptop which is connected to the ESP32 in a different room)
debug_tool = esp-builtin
debug_init_break = break setup
debug_server = 
	C:/Users/ReadieFur/.platformio/packages/tool-openocd-esp32/bin/openocd
	-f
; debug_test = *
build_flags =
	#region Developer configuration
	-D DEBUG_LOG_LEVEL=ESP_LOG_DEBUG
	#endregion
	#region Misc
	-D _DEBUG
	;https://github.com/espressif/openocd-esp32/issues/246
	-O0
	-g
	-D CONFIG_COMPILER_OPTIMIZATION_NONE
	; -v
; build_unflags =
; 	- -fno-exceptions
lib_ldf_mode = deep ;https://github.com/me-no-dev/ESPAsyncWebServer/issues/520
lib_deps =
	${globals.lib_deps}
	; platformio/tool-openocd-esp32@^2.1200.20230419
	roboticsbrno/SmartLeds@^3.1.2
	vshymanskyy/StreamDebugger@^1.0.1

[c3]
extends = globals
board_build.f_cpu = 80000000L ;I think I'd like to use 40mhz but 80 is the lowest supported on ALL chips.
build_flags =
	${globals.build_flags}
	-D C3

[env:c3_mini]
extends = c3
board = wifiduino32c3

[env:c3_dev]
extends = c3, debug
board = esp32-c3-devkitm-1
debug_server = 
	${debug.debug_server}
	C:/Users/ReadieFur/.platformio/packages/tool-openocd-esp32/share/openocd/scripts/board/esp32c3-builtin.cfg
build_flags =
	${c3.build_flags}
	${debug.build_flags}
